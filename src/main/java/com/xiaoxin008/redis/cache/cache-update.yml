version: '3'
services:
  #  redis服务
  redis-server:
    image: docker.io/redis
    container_name: redis-server-01
    restart: always
    volumes:
      - /home/uc/redis-server/redis.conf:/usr/local/etc/redis/redis.conf
      - /home/uc/redis-server/data/:/data
    ports:
      - 6379:6379
    command: redis-server /usr/local/etc/redis/redis.conf
    privileged: true
    network_mode: "host"

  #   canal服务
  canal-server:
    image: canal/canal-server
    container_name: canal-server-01
    restart: always
    ports:
      - 11111:11111
    environment:
      - canal.instance.mysql.slaveId=1234
      - canal.instance.master.address=172.16.52.23:3306
    privileged: true
